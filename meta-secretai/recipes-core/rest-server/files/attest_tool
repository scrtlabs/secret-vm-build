#!/bin/bash

# Exit on error
set -e

# Function to print error messages to stderr
error() {
    echo "ERROR: $1" >&2
    exit 1
}

# Function to print usage information
usage() {
    echo "Usage: $0 attest"
    echo "  Reads and outputs the content of attest_report.json"
    exit 1
}

# Check if exactly one argument is provided
if [ $# -ne 1 ]; then
    usage
fi

# Check if the argument is 'attest'
if [ "$1" != "attest" ]; then
    error "Invalid argument. Only 'attest' is supported."
fi

# Check if the file exists
if [ ! -f "attest_report.json" ]; then
    error "attest_report.json not found in current directory"
fi

# Check if the file is readable
if [ ! -r "attest_report.json" ]; then
    error "attest_report.json is not readable"
fi

# Output the content of the file
cat "attest_report.json"
